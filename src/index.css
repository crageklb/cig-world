@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  height: 100%;
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  overflow: hidden;
  background-color: #000000;
  /* Black base ensures safe areas (notch, home indicator) stay black; gradients layer on top */
  background:
    radial-gradient(ellipse 150% 60% at 50% 0%, rgba(139, 90, 43, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse 80% 40% at 50% 100%, rgba(160, 100, 40, 0.4) 0%, transparent 60%),
    radial-gradient(circle at center, #1a1a1a 20%, #000000 60%),
    #000000;
  background-attachment: fixed;
}

body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  overflow: hidden;
  background: transparent;
  color: #1B1B1B;
  font-family: 'Space Mono', monospace;
  font-size: 14px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Remove 300ms tap delay on mobile for faster touch response */
  touch-action: manipulation;
}

#root {
  width: 100%;
  height: 100%;
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  background: transparent;
}

/* Noise overlay - small tiles for fine film grain; smaller on mobile for density */
.noise-overlay {
  background-size: 120px 120px;
}
@media (max-width: 768px) {
  .noise-overlay {
    background-size: 60px 60px;
  }
}

/* Smoke layer blur - reduced on mobile for performance */
.smoke-layer-1 { filter: blur(80px); }
.smoke-layer-2 { filter: blur(100px); }
.smoke-layer-3 { filter: blur(90px); }
.smoke-layer-4 { filter: blur(110px); }
.smoke-layer-5 { filter: blur(95px); }
.smoke-layer-6 { filter: blur(105px); }
.smoke-layer-7 { filter: blur(88px); }
.smoke-layer-8 { filter: blur(98px); }
.smoke-layer-9 { filter: blur(92px); }
.smoke-layer-10 { filter: blur(102px); }

@media (max-width: 768px) {
  .smoke-layer-6,
  .smoke-layer-7,
  .smoke-layer-8,
  .smoke-layer-9,
  .smoke-layer-10 {
    display: none;
  }
  .smoke-layer-1,
  .smoke-layer-2,
  .smoke-layer-3,
  .smoke-layer-4,
  .smoke-layer-5 {
    filter: blur(60px);
  }
}

@keyframes smokeFloat1 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.65;
  }
  25% {
    transform: translate(-20px, -30px) scale(1.1);
    opacity: 0.6;
  }
  50% {
    transform: translate(30px, -50px) scale(0.95);
    opacity: 0.55;
  }
  75% {
    transform: translate(-10px, -70px) scale(1.05);
    opacity: 0.62;
  }
}

@keyframes smokeFloat2 {
  0%, 100% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.6;
  }
  33% {
    transform: translate(40px, -40px) scale(1.15) rotate(45deg);
    opacity: 0.55;
  }
  66% {
    transform: translate(-30px, -80px) scale(0.9) rotate(90deg);
    opacity: 0.65;
  }
}

@keyframes smokeFloat3 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.55;
  }
  20% {
    transform: translate(-50px, 20px) scale(1.2);
    opacity: 0.6;
  }
  40% {
    transform: translate(20px, -30px) scale(0.85);
    opacity: 0.5;
  }
  60% {
    transform: translate(-20px, -60px) scale(1.1);
    opacity: 0.58;
  }
  80% {
    transform: translate(40px, -40px) scale(0.95);
    opacity: 0.52;
  }
}

@keyframes smokeFloat4 {
  0%, 100% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.58;
  }
  50% {
    transform: translate(-60px, -50px) scale(1.25) rotate(-90deg);
    opacity: 0.5;
  }
}

@keyframes smokeFloat5 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.62;
  }
  30% {
    transform: translate(50px, -20px) scale(0.9);
    opacity: 0.55;
  }
  70% {
    transform: translate(-40px, -70px) scale(1.15);
    opacity: 0.6;
  }
}

@keyframes smokeFloat6 {
  0%, 100% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.55;
  }
  25% {
    transform: translate(-35px, 30px) scale(1.1) rotate(60deg);
    opacity: 0.6;
  }
  75% {
    transform: translate(45px, -55px) scale(0.92) rotate(-60deg);
    opacity: 0.52;
  }
}

@keyframes smokeFloat7 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.6;
  }
  40% {
    transform: translate(25px, -45px) scale(1.18);
    opacity: 0.55;
  }
  80% {
    transform: translate(-55px, -25px) scale(0.88);
    opacity: 0.58;
  }
}

@keyframes smokeFloat8 {
  0%, 100% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.55;
  }
  50% {
    transform: translate(60px, -60px) scale(1.3) rotate(120deg);
    opacity: 0.5;
  }
}

@-webkit-keyframes titleFadeIn {
  0% {
    opacity: 0;
    -webkit-transform: translateY(12px);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
  }
}
@keyframes titleFadeIn {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@-webkit-keyframes subtitleFadeIn {
  0% {
    opacity: 0;
    -webkit-transform: translateY(12px);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
  }
}
@keyframes subtitleFadeIn {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@-webkit-keyframes cardsSlideUp {
  0% {
    -webkit-transform: translateY(100%);
  }
  100% {
    -webkit-transform: translateY(20%);
  }
}
@keyframes cardsSlideUp {
  0% {
    transform: translateY(100%);
  }
  100% {
    transform: translateY(20%);
  }
}

@-webkit-keyframes cardDareRotate {
  0% {
    -webkit-transform: rotate(5deg);
  }
  100% {
    -webkit-transform: rotate(-5deg);
  }
}
@keyframes cardDareRotate {
  0% {
    transform: rotate(5deg);
  }
  100% {
    transform: rotate(-5deg);
  }
}

@-webkit-keyframes cardSmokeRotate {
  0% {
    -webkit-transform: rotate(-3deg);
  }
  100% {
    -webkit-transform: rotate(3deg);
  }
}
@keyframes cardSmokeRotate {
  0% {
    transform: rotate(-3deg);
  }
  100% {
    transform: rotate(3deg);
  }
}

@-webkit-keyframes cardSmokeOverlap {
  0% {
    margin-left: -4rem;
  }
  100% {
    margin-left: -1.5rem;
  }
}
@keyframes cardSmokeOverlap {
  0% {
    margin-left: -4rem;
  }
  100% {
    margin-left: -1.5rem;
  }
}

@-webkit-keyframes dareSpin {
  0% {
    -webkit-transform: rotate(0deg) scale(1);
  }
  50% {
    -webkit-transform: rotate(180deg) scale(1.35);
  }
  100% {
    -webkit-transform: rotate(360deg) scale(1);
  }
}
@keyframes dareSpin {
  0% {
    transform: rotate(0deg) scale(1);
  }
  50% {
    transform: rotate(180deg) scale(1.35);
  }
  100% {
    transform: rotate(360deg) scale(1);
  }
}

.animate-dare-spin {
  -webkit-animation: dareSpin 2s linear infinite;
  animation: dareSpin 2s linear infinite;
}

@-webkit-keyframes badgeWiggle {
  0%, 100% { -webkit-transform: translateX(0); }
  20% { -webkit-transform: translateX(-4px); }
  40% { -webkit-transform: translateX(4px); }
  60% { -webkit-transform: translateX(-3px); }
  80% { -webkit-transform: translateX(3px); }
}
@keyframes badgeWiggle {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

.badge-wiggle {
  -webkit-animation: badgeWiggle 0.4s ease-in-out;
  animation: badgeWiggle 0.4s ease-in-out;
}

@-webkit-keyframes subject6SlideUp {
  0% { -webkit-transform: translateY(100vh); }
  100% { -webkit-transform: translateY(50%); }
}
@keyframes subject6SlideUp {
  0% { transform: translateY(100vh); }
  100% { transform: translateY(50%); }
}

.subject6-slide-up {
  -webkit-animation: subject6SlideUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  animation: subject6SlideUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@media (prefers-reduced-motion: reduce) {
  .badge-wiggle {
    -webkit-animation: none;
    animation: none;
  }
  .subject6-slide-up {
    -webkit-animation: none;
    animation: none;
    -webkit-transform: translateY(50%);
    transform: translateY(50%);
  }
}

/* Exaggerated ease-out: strong deceleration at end */
:root {
  --ease-out-exaggerated: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Title/subtitle: fade in after cigarette (0.6s), slow fade with exaggerated ease-out */
.title-intro {
  opacity: 0;
  -webkit-animation: titleFadeIn 2s var(--ease-out-exaggerated) 1.5s both;
  animation: titleFadeIn 2s var(--ease-out-exaggerated) 1.5s both;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.subtitle-intro {
  opacity: 0;
  -webkit-animation: subtitleFadeIn 2s var(--ease-out-exaggerated) 1.55s both;
  animation: subtitleFadeIn 2s var(--ease-out-exaggerated) 1.55s both;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Cards: slide up with subtle overshoot and bounce */
.cards-slide-up {
  -webkit-transform: translateY(100%) translateZ(0);
  transform: translateY(100%) translateZ(0);
  -webkit-animation: cardsSlideUp 0.85s cubic-bezier(0.34, 1.2, 0.64, 1) 2.5s both;
  animation: cardsSlideUp 0.85s cubic-bezier(0.34, 1.2, 0.64, 1) 2.5s both;
}

.card-dare {
  -webkit-animation: cardDareRotate 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both;
  animation: cardDareRotate 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both;
  -webkit-transform-origin: bottom center;
  transform-origin: bottom center;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.card-press {
  transition: scale 100ms ease-out;
}

.card-press:active {
  scale: 0.95;
}

.card-smoke {
  margin-left: -4rem;
  -webkit-animation: cardSmokeRotate 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both,
    cardSmokeOverlap 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both;
  animation: cardSmokeRotate 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both,
    cardSmokeOverlap 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) 2.5s both;
  -webkit-transform-origin: bottom center;
  transform-origin: bottom center;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.card-dare.card-bg,
.card-smoke.card-bg {
  position: relative;
  overflow: hidden;
}

.card-dare.card-bg {
  background-image: url("/unsplash-1.png");
}

.card-dare.card-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, .8));
  box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.4);
  pointer-events: none;
}

.card-dare.card-bg:hover::after {
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.55));
}

.card-smoke.card-bg {
  background-image: url("/unsplash-2.png");
}

.card-smoke.card-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, .8));
  box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.4);
  pointer-events: none;
}

.card-smoke.card-bg:hover::after {
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.55));
}

/* Skip intro animations when navigating back from Dare */
.intro-skipped .title-intro {
  -webkit-animation: none;
  animation: none;
  opacity: 1;
  -webkit-transform: none;
  transform: none;
}

.intro-skipped .subtitle-intro {
  -webkit-animation: none;
  animation: none;
  opacity: 1;
  -webkit-transform: none;
  transform: none;
}

.intro-skipped .cards-slide-up {
  -webkit-animation: none;
  animation: none;
  -webkit-transform: translateY(20%);
  transform: translateY(20%);
}

.intro-skipped .card-dare {
  -webkit-animation: none;
  animation: none;
  -webkit-transform: rotate(-2deg);
  transform: rotate(-2deg);
}

.intro-skipped .card-press:active {
  scale: 0.95;
}

.intro-skipped .card-smoke {
  -webkit-animation: none;
  animation: none;
  -webkit-transform: rotate(3deg);
  transform: rotate(3deg);
  margin-left: -1.5rem;
}

/* Fallback when user prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  .title-intro,
  .subtitle-intro {
    -webkit-animation: none;
    animation: none;
    opacity: 1;
    transform: none;
  }
  .cards-slide-up {
    -webkit-animation: none;
    animation: none;
    -webkit-transform: translateY(20%) translateZ(0);
    transform: translateY(20%) translateZ(0);
  }
  .card-dare {
    -webkit-animation: none;
    animation: none;
    -webkit-transform: rotate(-2deg) translateZ(0);
    transform: rotate(-2deg) translateZ(0);
  }
  .card-smoke {
    -webkit-animation: none;
    animation: none;
    -webkit-transform: rotate(3deg) translateZ(0);
    transform: rotate(3deg) translateZ(0);
    margin-left: -1.5rem;
  }
}

.title-responsive {
  font-size: min(11rem, calc(100vw - 40px));
}

@media (max-width: 480px) {
  .title-responsive {
    font-size: 8rem;
  }
}

@media (max-width: 360px) {
  .title-responsive {
    font-size: 7rem;
  }
}
